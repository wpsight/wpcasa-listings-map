function initialize(e){var t=wpsightMap.map;t.mapTypeId=google.maps.MapTypeId[wpsightMap.map.mapTypeId],t.mapTypeControl="true"===wpsightMap.map.mapTypeControl,t.scrollwheel="true"===wpsightMap.map.scrollwheel,t.streetViewControl="true"===wpsightMap.map.streetViewControl,IsJsonString(wpsightMap.map.styles)?t.styles=JSON.parse(wpsightMap.map.styles):t.styles=wpsightMap.map.styles;var o=wpsightMap.cluster;o.enableRetinaIcons="true"===wpsightMap.cluster.enableRetinaIcons;for(var i=document.getElementById(e),s=new google.maps.LatLngBounds,a=new google.maps.Map(i,t),n=[],l=function(t){return function(){for(var e=t.length-1;0<=e;e--)t[e].infobox.close();this.infobox.open(a,this)}},p=wpsightMap.map.markers.length-1;0<=p;p--){var r=wpsightMap.map.markers[p],g=new google.maps.Marker({title:r.title,position:new google.maps.LatLng(parseFloat(r.lat),parseFloat(r.lng)),map:a,icon:{url:r.icon.url,size:new google.maps.Size(parseInt(r.icon.size[0]),parseInt(r.icon.size[1])),origin:new google.maps.Point(parseInt(r.icon.origin[0]),parseInt(r.icon.origin[1])),anchor:new google.maps.Point(parseInt(r.icon.anchor[0]),parseInt(r.icon.anchor[1])),scaledSize:new google.maps.Size(parseInt(r.icon.scaledSize[0]),parseInt(r.icon.scaledSize[1]))}});g.infobox=new InfoBox({content:r.infobox.content,closeBoxURL:r.infobox.closeBoxURL,infoBoxClearance:new google.maps.Size(40,40),pixelOffset:new google.maps.Size(r.infobox.pixelOffset[0],r.infobox.pixelOffset[1])}),google.maps.event.addListener(g,t.infobox_event,l(n)),s.extend(g.position),n[p]=g}var h=[{textColor:o.styles[0].textColor,url:o.styles[0].url,height:parseInt(o.styles[0].height),width:parseInt(o.styles[0].width)},{textColor:o.styles[1].textColor,url:o.styles[1].url,height:parseInt(o.styles[1].height),width:parseInt(o.styles[1].width)},{textColor:o.styles[2].textColor,url:o.styles[2].url,height:parseInt(o.styles[2].height),width:parseInt(o.styles[2].width)},{textColor:o.styles[3].textColor,url:o.styles[3].url,height:parseInt(o.styles[3].height),width:parseInt(o.styles[3].width)},{textColor:o.styles[4].textColor,url:o.styles[4].url,height:parseInt(o.styles[4].height),width:parseInt(o.styles[4].width)}],c={gridSize:parseInt(o.gridSize),styles:h};new MarkerClusterer(a,n,c);a.fitBounds(s),a.panToBounds(s)}function IsJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}!function(t){var o=wpsightMap.map;"true"!=o.map_page&&("closed"!=t.cookie(o.cookie)&&(t("#map-toggle-"+o.id).show(),t("#map-toggle-"+o.id+" .toggle-map").addClass("open"),initialize(o.id)),t(".toggle-map").click(function(e){e.preventDefault(),t("#map-toggle-"+o.id).is(":visible")?(t.cookie(o.cookie,"closed",{expires:60,path:o.cookie_path}),t("#"+o.id).animate({opacity:"0"},100,function(){t("#map-toggle-"+o.id+" .toggle-map").removeClass("open"),t("#map-toggle-"+o.id).slideUp(150)})):t("#map-toggle-"+o.id).slideDown(150,function(){t.cookie(o.cookie,"open",{expires:60,path:o.cookie_path}),t("#"+o.id).animate({opacity:"1"},100),initialize(o.id),t("#map-toggle-"+o.id+" .toggle-map").addClass("open")})}));var e=t(".map-init").attr("id");void 0!==e&&e.length&&initialize(e)}(jQuery);